---
// Internal utilities and types
import type { SiteConfig } from '../types';
import WhatsAppCTA from './WhatsAppCTA.astro';
import GoogleMap from './GoogleMap.astro';

// TypeScript props interface
interface Props {
  config: SiteConfig;
  className?: string;
}

// Destructure props with defaults
const { config, className = '' } = Astro.props;
---

<section class={`section-spacing section-separator bg-white ${className}`} id="ubicacion">
  <div class="section-container">
    <div class="content-spacing">
      <!-- Section Header -->
      <div class="text-center">
      <h2 class="mb-6">
        Visítanos
      </h2>
      <p class="text-large text-neutral-600 max-w-3xl mx-auto">
        Estamos ubicados en el corazón de Providencia, fácilmente accesible 
        en transporte público y con estacionamientos cercanos.
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">
      
      <!-- Map Column -->
      <div class="relative">
        <GoogleMap className="aspect-[4/3]" />
      </div>

      <!-- Info Column -->
      <div class="space-y-8">
        
        <!-- Address -->
        <div class="bg-sage-50 rounded-xl p-6">
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 w-12 h-12 bg-sage-200 rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-sage-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-sage-800 mb-2">Dirección</h3>
              <p class="text-neutral-600 leading-relaxed">{config.address}</p>
              <button 
                class="mt-3 text-sage-600 hover:text-sage-700 font-medium text-sm transition-colors"
                onclick="import('../lib/analytics').then(({ trackMapClick }) => trackMapClick())"
              >
                Cómo llegar →
              </button>
            </div>
          </div>
        </div>

        <!-- Hours -->
        <div class="bg-cream-50 rounded-xl p-6">
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 w-12 h-12 bg-cream-200 rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-cream-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-sage-800 mb-2">Horarios de Atención</h3>
              <div class="space-y-1 text-neutral-600">
                <p>Lunes a Viernes: 9:00 - 19:00</p>
                <p>Sábado: 9:00 - 17:00</p>
                <p class="text-sm text-neutral-500 mt-2">Domingo: Cerrado</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact -->
        <div class="bg-copper-50 rounded-xl p-6">
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 w-12 h-12 bg-copper-200 rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-copper-700" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91C21.95 6.45 17.5 2 12.04 2z"/>
              </svg>
            </div>
            <div class="flex-grow">
              <h3 class="text-lg font-semibold text-sage-800 mb-3">Reserva tu Cita</h3>
              <p class="text-neutral-600 mb-4">
                Contáctanos por WhatsApp para consultas y reservas. 
                Te responderemos rápidamente para confirmar tu cita.
              </p>
              <WhatsAppCTA 
                source="location" 
                message="Hola! Me gustaría consultar disponibilidad para reservar una cita."
                className="btn-primary"
              >
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91C21.95 6.45 17.5 2 12.04 2zm5.76 7.12c-.05-.11-.18-.18-.38-.31-.2-.14-1.17-.58-1.35-.64-.18-.07-.31-.1-.44.1-.14.2-.53.64-.65.77-.12.14-.24.16-.44.05-.2-.1-.85-.31-1.62-.99-.6-.53-1-.19-1.18-.02-.18.16-.22.26-.33.41-.1.14-.2.16-.37.05-.18-.1-.75-.28-1.43-.88-.63-.53-1.06-1.18-1.18-1.38-.12-.2-.01-.31.09-.41.09-.09.2-.24.3-.36.1-.12.14-.2.2-.34.07-.14.04-.26-.02-.36-.06-.1-.44-1.07-.6-1.46-.16-.38-.32-.33-.44-.33-.11 0-.24-.01-.37-.01-.12 0-.32.05-.49.24-.17.2-.65.63-.65 1.54s.67 1.79.76 1.91c.1.12 1.32 2.02 3.2 2.83.45.19.8.31 1.07.4.45.14.86.12 1.18.07.36-.05 1.17-.48 1.33-.94.16-.46.16-.85.11-.94z"/>
                </svg>
                Contactar por WhatsApp
              </WhatsAppCTA>
            </div>
          </div>
        </div>

        <!-- Transport info -->
        <div class="bg-neutral-50 rounded-xl p-6">
          <h4 class="text-lg font-medium text-sage-800 mb-3">Cómo Llegar</h4>
          <div class="space-y-2 text-sm text-neutral-600">
            <div class="flex items-center space-x-2">
              <svg class="w-4 h-4 text-sage-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"></path>
              </svg>
              <span>Metro Tobalaba por la salida de Luis Thayer Ojeda, o también se puede entrar directo desde el metro subiendo por el caracol.</span>
            </div>
            <div class="flex items-center space-x-2">
              <svg class="w-4 h-4 text-sage-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path>
              </svg>
              <span>Buses: 401, 421, 405, 117c, 406 y 426</span>
            </div>
            <div class="flex items-center space-x-2">
              <svg class="w-4 h-4 text-sage-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3a2 2 0 002 2h4a2 2 0 002-2v-3"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9l3-3 3 3"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12"></path>
              </svg>
              <span>Estacionamientos pagados disponibles en la zona</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
